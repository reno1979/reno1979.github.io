"use strict";(self.webpackChunkaip=self.webpackChunkaip||[]).push([[685],{"./node_modules/@apollo/client/react/hooks/useQuery.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{a:function(){return useQuery}});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),globals=__webpack_require__("./node_modules/@apollo/client/utilities/globals/index.js"),rehackt=__webpack_require__("./node_modules/rehackt/index.js"),canUse=__webpack_require__("./node_modules/@apollo/client/utilities/common/canUse.js"),didWarnUncachedGetSnapshot=!1,useSyncExternalStore=rehackt.useSyncExternalStore||function(subscribe,getSnapshot,getServerSnapshot){var value=getSnapshot();!1===globalThis.__DEV__||didWarnUncachedGetSnapshot||value===getSnapshot()||(didWarnUncachedGetSnapshot=!0,!1!==globalThis.__DEV__&&globals.kG.error(58));var _a=rehackt.useState({inst:{value:value,getSnapshot:getSnapshot}}),inst=_a[0].inst,forceUpdate=_a[1];return canUse.JC?rehackt.useLayoutEffect((function(){Object.assign(inst,{value:value,getSnapshot:getSnapshot}),checkIfSnapshotChanged(inst)&&forceUpdate({inst:inst})}),[subscribe,value,getSnapshot]):Object.assign(inst,{value:value,getSnapshot:getSnapshot}),rehackt.useEffect((function(){return checkIfSnapshotChanged(inst)&&forceUpdate({inst:inst}),subscribe((function handleStoreChange(){checkIfSnapshotChanged(inst)&&forceUpdate({inst:inst})}))}),[subscribe]),value};function checkIfSnapshotChanged(_a){var value=_a.value,getSnapshot=_a.getSnapshot;try{return value!==getSnapshot()}catch(_b){return!0}}var DocumentType,cache,lib=__webpack_require__("./node_modules/@wry/equality/lib/index.js"),mergeOptions=__webpack_require__("./node_modules/@apollo/client/utilities/common/mergeOptions.js"),ApolloContext=__webpack_require__("./node_modules/@apollo/client/react/context/ApolloContext.js"),errors=__webpack_require__("./node_modules/@apollo/client/errors/index.js"),networkStatus=__webpack_require__("./node_modules/@apollo/client/core/networkStatus.js"),caches=__webpack_require__("./node_modules/@apollo/client/utilities/caching/caches.js"),sizes=__webpack_require__("./node_modules/@apollo/client/utilities/caching/sizes.js"),getMemoryInternals=__webpack_require__("./node_modules/@apollo/client/utilities/caching/getMemoryInternals.js");function operationName(type){var name;switch(type){case DocumentType.Query:name="Query";break;case DocumentType.Mutation:name="Mutation";break;case DocumentType.Subscription:name="Subscription"}return name}function parser(document){cache||(cache=new caches.s(sizes.Q.parser||1e3));var variables,type,cached=cache.get(document);if(cached)return cached;(0,globals.kG)(!!document&&!!document.kind,59,document);for(var fragments=[],queries=[],mutations=[],subscriptions=[],_i=0,_a=document.definitions;_i<_a.length;_i++){var x=_a[_i];if("FragmentDefinition"!==x.kind){if("OperationDefinition"===x.kind)switch(x.operation){case"query":queries.push(x);break;case"mutation":mutations.push(x);break;case"subscription":subscriptions.push(x)}}else fragments.push(x)}(0,globals.kG)(!fragments.length||queries.length||mutations.length||subscriptions.length,60),(0,globals.kG)(queries.length+mutations.length+subscriptions.length<=1,61,document,queries.length,subscriptions.length,mutations.length),type=queries.length?DocumentType.Query:DocumentType.Mutation,queries.length||mutations.length||(type=DocumentType.Subscription);var definitions=queries.length?queries:mutations.length?mutations:subscriptions;(0,globals.kG)(1===definitions.length,62,document,definitions.length);var definition=definitions[0];variables=definition.variableDefinitions||[];var payload={name:definition.name&&"Name"===definition.name.kind?definition.name.value:"data",type:type,variables:variables};return cache.set(document,payload),payload}!function(DocumentType){DocumentType[DocumentType.Query=0]="Query",DocumentType[DocumentType.Mutation=1]="Mutation",DocumentType[DocumentType.Subscription=2]="Subscription"}(DocumentType||(DocumentType={})),parser.resetCache=function(){cache=void 0},!1!==globalThis.__DEV__&&(0,getMemoryInternals.zP)("parser",(function(){return cache?cache.size:0}));var maybeDeepFreeze=__webpack_require__("./node_modules/@apollo/client/utilities/common/maybeDeepFreeze.js"),compact=__webpack_require__("./node_modules/@apollo/client/utilities/common/compact.js"),arrays=__webpack_require__("./node_modules/@apollo/client/utilities/common/arrays.js"),useQuery_hasOwnProperty=Object.prototype.hasOwnProperty;function useQuery(query,options){return void 0===options&&(options=Object.create(null)),function useInternalState(client,query){var stateRef=rehackt.useRef();stateRef.current&&client===stateRef.current.client&&query===stateRef.current.query||(stateRef.current=new InternalState(client,query,stateRef.current));var state=stateRef.current;return state.forceUpdateState=rehackt.useReducer((function(tick){return tick+1}),0)[1],state}(function useApolloClient(override){var context=rehackt.useContext((0,ApolloContext.K)()),client=override||context.client;return(0,globals.kG)(!!client,49),client}(options.client),query).useQuery(options)}var InternalState=function(){function InternalState(client,query,previous){var _this=this;this.client=client,this.query=query,this.forceUpdate=function(){return _this.forceUpdateState()},this.ssrDisabledResult=(0,maybeDeepFreeze.J)({loading:!0,data:void 0,error:void 0,networkStatus:networkStatus.Ie.loading}),this.skipStandbyResult=(0,maybeDeepFreeze.J)({loading:!1,data:void 0,error:void 0,networkStatus:networkStatus.Ie.ready}),this.toQueryResultCache=new(canUse.mr?WeakMap:Map),function verifyDocumentType(document,type){var operation=parser(document),requiredOperationName=operationName(type),usedOperationName=operationName(operation.type);(0,globals.kG)(operation.type===type,63,requiredOperationName,requiredOperationName,usedOperationName)}(query,DocumentType.Query);var previousResult=previous&&previous.result,previousData=previousResult&&previousResult.data;previousData&&(this.previousData=previousData)}return InternalState.prototype.forceUpdateState=function(){!1!==globalThis.__DEV__&&globals.kG.warn(51)},InternalState.prototype.executeQuery=function(options){var _a,_this=this;options.query&&Object.assign(this,{query:options.query}),this.watchQueryOptions=this.createWatchQueryOptions(this.queryHookOptions=options);var concast=this.observable.reobserveAsConcast(this.getObsQueryOptions());return this.previousData=(null===(_a=this.result)||void 0===_a?void 0:_a.data)||this.previousData,this.result=void 0,this.forceUpdate(),new Promise((function(resolve){var result;concast.subscribe({next:function(value){result=value},error:function(){resolve(_this.toQueryResult(_this.observable.getCurrentResult()))},complete:function(){resolve(_this.toQueryResult(result))}})}))},InternalState.prototype.useQuery=function(options){var _this=this;this.renderPromises=rehackt.useContext((0,ApolloContext.K)()).renderPromises,this.useOptions(options);var obsQuery=this.useObservableQuery(),result=useSyncExternalStore(rehackt.useCallback((function(handleStoreChange){if(_this.renderPromises)return function(){};_this.forceUpdate=handleStoreChange;var onNext=function(){var previousResult=_this.result,result=obsQuery.getCurrentResult();previousResult&&previousResult.loading===result.loading&&previousResult.networkStatus===result.networkStatus&&(0,lib.D)(previousResult.data,result.data)||_this.setResult(result)},onError=function(error){if(subscription.unsubscribe(),subscription=obsQuery.resubscribeAfterError(onNext,onError),!useQuery_hasOwnProperty.call(error,"graphQLErrors"))throw error;var previousResult=_this.result;(!previousResult||previousResult&&previousResult.loading||!(0,lib.D)(error,previousResult.error))&&_this.setResult({data:previousResult&&previousResult.data,error:error,loading:!1,networkStatus:networkStatus.Ie.error})},subscription=obsQuery.subscribe(onNext,onError);return function(){setTimeout((function(){return subscription.unsubscribe()})),_this.forceUpdate=function(){return _this.forceUpdateState()}}}),[obsQuery,this.renderPromises,this.client.disableNetworkFetches]),(function(){return _this.getCurrentResult()}),(function(){return _this.getCurrentResult()}));return this.unsafeHandlePartialRefetch(result),this.toQueryResult(result)},InternalState.prototype.useOptions=function(options){var _a,watchQueryOptions=this.createWatchQueryOptions(this.queryHookOptions=options),currentWatchQueryOptions=this.watchQueryOptions;(0,lib.D)(watchQueryOptions,currentWatchQueryOptions)||(this.watchQueryOptions=watchQueryOptions,currentWatchQueryOptions&&this.observable&&(this.observable.reobserve(this.getObsQueryOptions()),this.previousData=(null===(_a=this.result)||void 0===_a?void 0:_a.data)||this.previousData,this.result=void 0)),this.onCompleted=options.onCompleted||InternalState.prototype.onCompleted,this.onError=options.onError||InternalState.prototype.onError,!this.renderPromises&&!this.client.disableNetworkFetches||!1!==this.queryHookOptions.ssr||this.queryHookOptions.skip?this.queryHookOptions.skip||"standby"===this.watchQueryOptions.fetchPolicy?this.result=this.skipStandbyResult:this.result!==this.ssrDisabledResult&&this.result!==this.skipStandbyResult||(this.result=void 0):this.result=this.ssrDisabledResult},InternalState.prototype.getObsQueryOptions=function(){var toMerge=[],globalDefaults=this.client.defaultOptions.watchQuery;return globalDefaults&&toMerge.push(globalDefaults),this.queryHookOptions.defaultOptions&&toMerge.push(this.queryHookOptions.defaultOptions),toMerge.push((0,compact.o)(this.observable&&this.observable.options,this.watchQueryOptions)),toMerge.reduce(mergeOptions.J)},InternalState.prototype.createWatchQueryOptions=function(_a){var _b;void 0===_a&&(_a={});var skip=_a.skip,otherOptions=(_a.ssr,_a.onCompleted,_a.onError,_a.defaultOptions,(0,tslib_es6._T)(_a,["skip","ssr","onCompleted","onError","defaultOptions"])),watchQueryOptions=Object.assign(otherOptions,{query:this.query});if(!this.renderPromises||"network-only"!==watchQueryOptions.fetchPolicy&&"cache-and-network"!==watchQueryOptions.fetchPolicy||(watchQueryOptions.fetchPolicy="cache-first"),watchQueryOptions.variables||(watchQueryOptions.variables={}),skip){var _c=watchQueryOptions.fetchPolicy,fetchPolicy=void 0===_c?this.getDefaultFetchPolicy():_c,_d=watchQueryOptions.initialFetchPolicy,initialFetchPolicy=void 0===_d?fetchPolicy:_d;Object.assign(watchQueryOptions,{initialFetchPolicy:initialFetchPolicy,fetchPolicy:"standby"})}else watchQueryOptions.fetchPolicy||(watchQueryOptions.fetchPolicy=(null===(_b=this.observable)||void 0===_b?void 0:_b.options.initialFetchPolicy)||this.getDefaultFetchPolicy());return watchQueryOptions},InternalState.prototype.getDefaultFetchPolicy=function(){var _a,_b;return(null===(_a=this.queryHookOptions.defaultOptions)||void 0===_a?void 0:_a.fetchPolicy)||(null===(_b=this.client.defaultOptions.watchQuery)||void 0===_b?void 0:_b.fetchPolicy)||"cache-first"},InternalState.prototype.onCompleted=function(data){},InternalState.prototype.onError=function(error){},InternalState.prototype.useObservableQuery=function(){var obsQuery=this.observable=this.renderPromises&&this.renderPromises.getSSRObservable(this.watchQueryOptions)||this.observable||this.client.watchQuery(this.getObsQueryOptions());this.obsQueryFields=rehackt.useMemo((function(){return{refetch:obsQuery.refetch.bind(obsQuery),reobserve:obsQuery.reobserve.bind(obsQuery),fetchMore:obsQuery.fetchMore.bind(obsQuery),updateQuery:obsQuery.updateQuery.bind(obsQuery),startPolling:obsQuery.startPolling.bind(obsQuery),stopPolling:obsQuery.stopPolling.bind(obsQuery),subscribeToMore:obsQuery.subscribeToMore.bind(obsQuery)}}),[obsQuery]);var ssrAllowed=!(!1===this.queryHookOptions.ssr||this.queryHookOptions.skip);return this.renderPromises&&ssrAllowed&&(this.renderPromises.registerSSRObservable(obsQuery),obsQuery.getCurrentResult().loading&&this.renderPromises.addObservableQueryPromise(obsQuery)),obsQuery},InternalState.prototype.setResult=function(nextResult){var previousResult=this.result;previousResult&&previousResult.data&&(this.previousData=previousResult.data),this.result=nextResult,this.forceUpdate(),this.handleErrorOrCompleted(nextResult,previousResult)},InternalState.prototype.handleErrorOrCompleted=function(result,previousResult){var _this=this;if(!result.loading){var error_1=this.toApolloError(result);Promise.resolve().then((function(){error_1?_this.onError(error_1):result.data&&(null==previousResult?void 0:previousResult.networkStatus)!==result.networkStatus&&result.networkStatus===networkStatus.Ie.ready&&_this.onCompleted(result.data)})).catch((function(error){!1!==globalThis.__DEV__&&globals.kG.warn(error)}))}},InternalState.prototype.toApolloError=function(result){return(0,arrays.O)(result.errors)?new errors.cA({graphQLErrors:result.errors}):result.error},InternalState.prototype.getCurrentResult=function(){return this.result||this.handleErrorOrCompleted(this.result=this.observable.getCurrentResult()),this.result},InternalState.prototype.toQueryResult=function(result){var queryResult=this.toQueryResultCache.get(result);if(queryResult)return queryResult;var data=result.data,resultWithoutPartial=(result.partial,(0,tslib_es6._T)(result,["data","partial"]));return this.toQueryResultCache.set(result,queryResult=(0,tslib_es6.pi)((0,tslib_es6.pi)((0,tslib_es6.pi)({data:data},resultWithoutPartial),this.obsQueryFields),{client:this.client,observable:this.observable,variables:this.observable.variables,called:!this.queryHookOptions.skip,previousData:this.previousData})),!queryResult.error&&(0,arrays.O)(result.errors)&&(queryResult.error=new errors.cA({graphQLErrors:result.errors})),queryResult},InternalState.prototype.unsafeHandlePartialRefetch=function(result){!result.partial||!this.queryHookOptions.partialRefetch||result.loading||result.data&&0!==Object.keys(result.data).length||"cache-only"===this.observable.options.fetchPolicy||(Object.assign(result,{loading:!0,networkStatus:networkStatus.Ie.refetch}),this.observable.refetch())},InternalState}()}}]);